import MotionDiv from '../motionDiv'

# Troubleshooting Guide

<MotionDiv>

Encountering issues with Screenpipe? Don't worry—this guide will help you identify and resolve common problems that might arise during installation, usage, or customization. Here are some frequently encountered issues and their solutions.

</MotionDiv>


### Installation Issues
<MotionDiv delay={0.3}>
#### Problem: Installation fails or dependencies are missing

**Solution**: 
- Ensure that all dependencies are correctly installed. For Mac users, you can try reinstalling Rust and the necessary libraries with:
  ```bash
  curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
  ```
  For Windows or Linux users, make sure `pkg-config`, `ffmpeg`, `jq`, and `tesseract` are installed. Follow the [installation guide](../installation.mdx) to set up the environment properly.

- If building from the source fails, check the system’s version of dependencies like **SQLite** or **Tesseract** to ensure compatibility with Screenpipe. You can update dependencies using:
  ```bash
  sudo apt-get install libavformat-dev libtesseract-dev
  ```

</MotionDiv>

---

### Audio & Video Issues

<MotionDiv delay={0.5}>

#### Problem: Audio or video capture doesn't work as expected

**Solution**:
- First, ensure that the audio and video input/output devices are configured correctly. You can list available devices with:
  ```bash
  screenpipe --list-audio-devices
  ```

- If no audio is captured, try running Screenpipe with audio logging enabled:
  ```bash
  screenpipe --enable-audio-logging
  ```

- For video issues, check if multi-monitor support is enabled (if applicable) or lower the resolution to reduce the load:
  ```bash
  screenpipe --multi-monitor --resolution 720p
  ```

</MotionDiv>

---

### Performance Problems

<MotionDiv delay={0.7}>

#### Problem: Screenpipe uses too much CPU or memory

**Solution**:
- Reduce the capture frame rate and lower the video resolution to optimize performance. For example:
  ```bash
  screenpipe --frame-rate 10 --resolution 480p
  ```

- If using audio transcriptions, consider switching to a lighter engine like **WebRTC** instead of **Whisper**:
  ```bash
  screenpipe --vad-engine webrtc
  ```

- Monitor the system’s resource usage to identify potential bottlenecks. You can use tools like **htop** on Linux or **Activity Monitor** on macOS.

</MotionDiv>

---

### API or Pipe Issues

<MotionDiv delay={0.9}>

#### Problem: Custom pipes aren't running or fail to integrate

**Solution**:
- Ensure that your pipe is properly registered with the Screenpipe instance. Check the pipe store for any missing or incorrect configurations:
  ```bash
  screenpipe --list-pipes
  ```

- For debugging, add the `--debug` flag to view detailed logs and understand what might be failing within your pipe:
  ```bash
  screenpipe --debug
  ```

- Make sure that the pipe’s URL is correct, and reinstall it if needed:
  ```bash
  curl -X POST "http://localhost:3030/pipes/download" -H "Content-Type: application/json" -d '{"url": "<pipe-url>"}'
  ```

</MotionDiv>

---

### Common Errors

<MotionDiv delay={1.1}>

#### Problem: `Permission denied` error during installation or runtime

**Solution**:
- If you encounter a permission issue on Unix-based systems, try running the command with `sudo`. For example:
  ```bash
  sudo screenpipe
  ```

- On Windows, ensure that the installation directory has write permissions, or change the directory:
  ```bash
  screenpipe --data-dir "C:\NewDirectory"
  ```

#### Problem: `SQLite database locked` error

**Solution**:
- This typically happens when multiple processes are accessing the database at once. To resolve this, you can restart the Screenpipe service or limit concurrent API queries:
  ```bash
  screenpipe --restart
  ```

#### Problem: Video files are corrupted or fail to play

**Solution**:
- Verify the integrity of the video file by attempting to play it manually using **ffplay**:
  ```bash
  ffplay "path-to-video.mp4"
  ```

- If it fails, try re-encoding the file using **ffmpeg**:
  ```bash
  ffmpeg -i corrupted-file.mp4 -vcodec copy -acodec copy fixed-file.mp4
  ```

</MotionDiv>

---

<MotionDiv delay={1.3}>

If none of the above solutions resolve your issue, consider reaching out to the [community on Discord](https://discord.gg/dU9EBuw7Uq) or opening an issue on the [GitHub repository](https://github.com/mediar-ai/screenpipe/issues).

For more detailed setup instructions or FAQs, check the [Installation Guide](./installation.mdx) or [FAQ](./faq.mdx).

</MotionDiv>